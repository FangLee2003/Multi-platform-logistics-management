import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { X, AlertCircle, User, Calendar, Phone } from "lucide-react";
export default function MaintenanceModal({ isOpen, onClose, vehicles, emergencyRequestsByVehicleId, onViewDetails, onScheduleMaintenance, }) {
    if (!isOpen)
        return null;
    // Debug: Log vehicles data to see structure
    console.log('MaintenanceModal vehicles:', vehicles);
    console.log('MaintenanceModal emergencyRequestsByVehicleId:', emergencyRequestsByVehicleId);
    return (_jsx("div", { className: "fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center p-4", children: _jsxs("div", { className: "relative bg-white rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden", children: [_jsxs("div", { className: "flex items-center justify-between p-6 border-b border-gray-200", children: [_jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("div", { className: "flex-shrink-0 w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center", children: _jsx(AlertCircle, { className: "w-5 h-5 text-red-600" }) }), _jsxs("div", { children: [_jsx("h2", { className: "text-xl font-semibold text-gray-900", children: "Danh s\u00E1ch xe c\u1EA7n b\u1EA3o tr\u00EC" }), _jsxs("p", { className: "text-sm text-gray-500", children: [vehicles.length, " xe c\u1EA7n \u0111\u01B0\u1EE3c b\u1EA3o tr\u00EC"] })] })] }), _jsx("button", { onClick: onClose, className: "flex-shrink-0 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-lg flex items-center justify-center transition-colors", children: _jsx(X, { className: "w-4 h-4 text-gray-600" }) })] }), _jsx("div", { className: "p-6 overflow-y-auto max-h-[calc(90vh-120px)]", children: vehicles.length === 0 ? (_jsxs("div", { className: "text-center py-12", children: [_jsx(AlertCircle, { className: "w-12 h-12 text-gray-400 mx-auto mb-4" }), _jsx("h3", { className: "text-lg font-medium text-gray-900 mb-2", children: "Kh\u00F4ng c\u00F3 xe c\u1EA7n b\u1EA3o tr\u00EC" }), _jsx("p", { className: "text-gray-500", children: "T\u1EA5t c\u1EA3 xe hi\u1EC7n t\u1EA1i \u0111\u1EC1u \u0111ang trong t\u00ECnh tr\u1EA1ng t\u1ED1t." })] })) : (_jsx("div", { className: "space-y-4", children: vehicles.map((vehicle) => (_jsx("div", { className: "bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow", children: _jsxs("div", { className: "flex items-start justify-between", children: [_jsxs("div", { className: "flex-1", children: [_jsxs("div", { className: "flex items-center space-x-3 mb-3", children: [_jsx("div", { className: "w-3 h-3 bg-red-500 rounded-full" }), _jsx("h3", { className: "text-lg font-semibold text-gray-900", children: vehicle.licensePlate }), _jsxs("span", { className: "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800", children: [_jsx(AlertCircle, { className: "w-3 h-3 mr-1" }), "C\u1EA7n b\u1EA3o tr\u00EC"] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4", children: [_jsxs("div", { className: "flex items-center space-x-2 text-sm text-gray-600", children: [_jsx("span", { className: "font-medium", children: "Lo\u1EA1i xe:" }), _jsx("span", { children: vehicle.vehicleType })] }), _jsxs("div", { className: "flex items-center space-x-2 text-sm text-gray-600", children: [_jsx("span", { className: "font-medium", children: "T\u1EA3i tr\u1ECDng:" }), _jsxs("span", { children: [vehicle.capacityWeightKg || 0, " kg"] })] })] }), (vehicle.currentDriver || vehicle.driver) && (_jsxs("div", { className: "bg-gray-50 rounded-lg p-4", children: [_jsxs("h4", { className: "text-sm font-medium text-gray-900 mb-2 flex items-center", children: [_jsx(User, { className: "w-4 h-4 mr-2" }), "T\u00E0i x\u1EBF hi\u1EC7n t\u1EA1i"] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4 text-sm", children: [_jsxs("div", { children: [_jsx("span", { className: "text-gray-600", children: "T\u00EAn: " }), _jsx("span", { className: "font-medium", children: vehicle.currentDriver?.fullName || vehicle.driver?.name || "N/A" })] }), _jsxs("div", { className: "flex items-center", children: [_jsx(Phone, { className: "w-3 h-3 mr-1 text-gray-400" }), _jsx("span", { className: "text-gray-600", children: "S\u0110T: " }), _jsx("span", { className: "font-medium", children: vehicle.currentDriver?.phone || vehicle.driver?.phone || "N/A" })] })] })] })), _jsx("div", { className: "mt-4 pt-4 border-t border-gray-200", children: _jsxs("div", { className: "flex items-center text-sm text-gray-600", children: [_jsx(Calendar, { className: "w-4 h-4 mr-2" }), _jsx("span", { children: "B\u1EA3o tr\u00EC g\u1EA7n nh\u1EA5t: " }), _jsx("span", { className: "font-medium", children: vehicle.lastMaintenance
                                                                ? new Date(vehicle.lastMaintenance).toLocaleDateString('vi-VN')
                                                                : "Chưa có" })] }) })] }), _jsxs("div", { className: "flex flex-col space-y-2 ml-4", children: [_jsx("button", { onClick: () => onViewDetails(vehicle), className: "px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors", children: "Xem chi ti\u1EBFt" }), _jsx("button", { onClick: () => {
                                                    const emergencyRequests = emergencyRequestsByVehicleId[vehicle.id] || [];
                                                    const emergencyRequest = emergencyRequests.find((e) => e.status?.id === 51 || e.status?.name === 'MAINTENANCE_PENDING');
                                                    console.log('DEBUG emergencyRequests:', emergencyRequests);
                                                    console.log('DEBUG emergencyRequest:', emergencyRequest);
                                                    onScheduleMaintenance(vehicle, emergencyRequest);
                                                }, className: "px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition-colors", children: "\u0110\u1EB7t l\u1ECBch b\u1EA3o tr\u00EC" })] })] }) }, vehicle.id))) })) }), _jsxs("div", { className: "flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50", children: [_jsx("button", { onClick: onClose, className: "px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 font-medium transition-colors", children: "\u0110\u00F3ng" }), _jsx("button", { className: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors", children: "Xu\u1EA5t b\u00E1o c\u00E1o" })] })] }) }));
}
